# 📝 AI App Template 변경 로그

> **목적**: ai_app_template 시스템의 모든 변경사항을 체계적으로 기록하여 개발 과정과 개선 사항을 추적

---

## 📅 2024-10-27 10:40 - AI App Template 파일 구조 대정리 (시스템 완전 재편)

**변경 원인**: 사용자 요청 - "파일이 왜이리 많지? 템플릿을 바로 사용하는게 아닌 기록 용 템플릿이라면 소스 라는 폴도를 만들어서 다 옮겨줘"
**문제점**: 
1. 23개 이상의 MD 파일이 여러 폴더에 흩어져 사용자 혼란 야기
2. 실제 사용 파일과 기록용 파일이 섞여 있어 AI가 어떤 파일을 읽어야 할지 불명확
3. 동일한 프롬프트에 대해 매번 다른 응답 생성 (일관성 부족)
4. 폴더 우선순위 시스템이 실제로는 작동하지 않음

**수정된 파일들**:

#### 1. **전체 폴더 구조 재편**
- **변경 내용**: 복잡한 다중 폴더 구조를 간단한 루트 + source 구조로 단순화
- **세부 수정**:
  - `source/archive/` 폴더 생성 및 기존 번호 폴더들 (00_, 01_, 02_) 이동
  - `source/legacy/` 폴더 생성 및 중복/사용하지 않는 파일들 이동
  - `core/`, `templates/`, `examples/` 폴더를 `source/`로 이동
  - 루트에는 실제 사용 파일 3개만 유지
- **영향 범위**: AI가 읽어야 할 파일이 23개 → 3개로 대폭 단순화

#### 2. `01_PREFLIGHT.md` (신규 생성)
- **변경 내용**: 환경 검증 시스템을 첫 번째 우선순위로 설정
- **세부 수정**:
  - A) 완전한 앱 개발 환경 ✅ → 02_APP_DISCOVERY.md 실행
  - B) 빠른 테스트/학습 환경 🧪 → source/examples/ 폴더 접근
  - C) 개발 환경 없음 ❌ → 정보 제공 모드
  - 3단계 검증 프로세스로 성공적인 개발 경험 보장
- **영향 범위**: 모든 앱 개발 요청이 환경 검증부터 시작되어 성공률 향상

#### 3. `02_APP_DISCOVERY.md` (신규 생성)
- **변경 내용**: 8단계 앱 발견 시스템을 두 번째 우선순위로 설정
- **세부 수정**:
  - Step 1: 웰컴 & 앱 카테고리 선택 (8개 카테고리)
  - Step 2: 세부 앱 타입 확정 (카테고리별 구체적 옵션)
  - Step 3: 주요 사용자 파악 (연령대, 라이프스타일, 기술 수준)
  - Step 4: 핵심 가치 및 기능 파악 (우선순위 기반 선택)
  - Step 5: 특별 요구사항 및 최종 확인
  - 완료 시 03_CLAUDE_TEMPLATE.md 자동 실행
- **영향 범위**: 막연한 요청도 구체적 맞춤형 앱으로 변환

#### 4. `03_CLAUDE_TEMPLATE.md` (신규 생성)
- **변경 내용**: 실제 개발 템플릿을 세 번째 우선순위로 설정
- **세부 수정**:
  - 수집된 정보 기반 맞춤형 개발 시작
  - Clean Architecture + MVVM 패턴 적용
  - source/core/, source/examples/ 폴더 참조 시스템
  - JSON Lines 로깅 시스템으로 진행 상황 추적
- **영향 범위**: 모든 앱 개발이 일관된 고품질 아키텍처로 구현

#### 5. `README.md` (완전 재작성)
- **변경 내용**: 복잡한 다중 시작 방법을 단일 프롬프트로 통합
- **세부 수정**:
  - 사용법: "ai_app_template을 기반으로 앱을 개발해줘!" 단일 프롬프트만 안내
  - 새로운 파일 구조 반영 (01, 02, 03 + source/)
  - 3단계 자동 프로세스 설명 (프리플라이트 → 앱 발견 → 개발)
  - source/ 폴더는 참고용임을 명시
- **영향 범위**: 사용자 인지 부하 대폭 감소, 일관된 사용 경험 제공

**예상 효과**:
- ✅ **일관된 응답 보장**: 동일한 프롬프트에 대해 항상 01 → 02 → 03 순서로 실행
- ✅ **사용자 혼란 완전 제거**: 읽어야 할 파일이 3개로 명확화
- ✅ **개발 성공률 향상**: 프리플라이트 검증으로 환경 미흡자 사전 필터링
- ✅ **시스템 유지보수성 향상**: 핵심 파일만 루트에 유지, 기록용 자료는 source/에 정리
- ✅ **AI 동작 예측 가능성**: 번호 순서로 명확한 파일 읽기 순서 보장

**해결된 핵심 문제**:
1. **파일 수 과다** → 23개 → 3개 메인 템플릿으로 단순화
2. **일관성 부족** → 번호 기반 우선순위로 일관된 실행 보장
3. **사용자 혼란** → 단일 프롬프트로 모든 상황 처리
4. **유지보수 복잡성** → 기록용 파일 분리로 관리 간소화

**다음 예정 작업**:
- [x] CHANGELOG.md 생성 및 모든 변경 이력 이전
- [x] source/legacy/add.md 제거
- [ ] 새로운 시스템으로 실제 테스트 수행
- [ ] 사용자 피드백 수집 및 미세 조정

---

## 📅 2024-10-27 11:50 - 개발 방식 선택 단계 추가 (프롬프트 일관성 개선)

**변경 원인**: 사용자 피드백 - "템플릿으로 할지, 맞춤으로 할지 새로운 앱으로 만들지 있지 않았어? 그 로직이 먼저 나와야 할것 같은데?"
**문제점**: 
1. A 선택 후 바로 "무엇을 만들지" (앱 카테고리)로 넘어가서 "어떻게 만들지" (개발 방식) 선택이 빠짐
2. 같은 프롬프트인데 세션마다 다른 응답 발생 (1,2번은 정상, 3번은 추가 질문)
3. 사용자가 개발 방식을 선택할 기회 없이 바로 맞춤형 개발로 진행

**수정된 파일들**:

#### 1. `01_PREFLIGHT.md`
- **변경 내용**: A 선택 후 "개발 방식 선택" 단계 추가
- **세부 수정**:
  - 32-40번째 줄: "02_APP_DISCOVERY.md 실행" → "개발 방식 선택 단계" 변경
  - 60-92번째 줄: 기존 "2단계: 개발 목적 확인" → "2단계: 개발 방식 선택"으로 교체
  - 3가지 개발 방식 제시:
    - 1️⃣ 기존 예시 템플릿 활용 (30분-1시간, 빠른 결과)
    - 2️⃣ 맞춤형 새 앱 개발 (2-3시간, 8단계 발견 시스템)
    - 3️⃣ 학습/체험 모드 (30분, 코드 구조 이해)
  - 134-136번째 줄: "02_APP_DISCOVERY.md가 자동 실행" → "개발 방식 선택 단계로 진행" 변경
- **영향 범위**: 모든 A 선택자가 먼저 개발 방식을 결정한 후 세부 진행

**예상 효과**:
- ✅ **올바른 플로우**: A 선택 → 개발 방식 선택 (어떻게) → 앱 선택 (무엇을)
- ✅ **일관된 응답**: 모든 세션에서 동일한 플로우로 진행
- ✅ **사용자 선택권**: 빠른 템플릿 vs 맞춤형 vs 학습 모드 중 선택 가능
- ✅ **명확한 기대치**: 각 방식별 소요 시간과 결과물 사전 안내

**해결된 핵심 문제**:
1. **로직 순서 문제** → "어떻게 만들지" 먼저, "무엇을 만들지" 나중으로 수정
2. **프롬프트 일관성 부족** → 모든 세션에서 동일한 단계별 진행 보장
3. **사용자 선택권 부족** → 3가지 개발 방식 중 상황에 맞는 선택 가능

**다음 예정 작업**:
- [ ] 수정된 시스템으로 실제 테스트 수행
- [ ] 각 개발 방식별 세부 플로우 검증
- [ ] 사용자 피드백 수집 및 추가 개선

---

## 📝 2024-10-26 11:00 - 프로젝트 생성 워크플로우 단순화 (대폭 개선)

**변경 원인**: 사용자 제안 반영 - "그냥 사용자가 먼저 프로젝트를 만들고 이후에 진행을 하면 되는거 아니야? 무조껀 어짜피 너가 프로젝트 세팅을 하잖아 그러니깐 그 단계를 추가하는거지/ 만약 그렇게 못했을시를 방지하기 위해 앞에다가 Ai_{projectName}으로 쓰는거지"

**수정된 파일들**:

#### 1. CLAUDE_template.md 단순화
- **복잡한 케이싱 검증 스크립트 제거**: 50줄 이상의 bash 검증 코드 삭제
- **사용자 우선 프로젝트 생성 안내**: 개발 시작 전 필수 단계로 Xcode 프로젝트 먼저 생성하도록 수정
- **간단한 프로젝트 감지 로직**: .xcodeproj 파일 존재 여부만 확인하는 단순한 스크립트로 교체
- **AI_{projectName} 안전장치**: 프로젝트가 없을 때 임시 폴더로 생성하여 충돌 방지

#### 2. Tasks_template.md 검증 단계 대폭 축소
- **9단계 → 4단계로 축소**: 복잡한 케이싱 검증 단계들 제거
- **핵심만 유지**: 프로젝트 감지, 설정 확인, 구조 설정, 빌드 확인만 남김
- **CORRECTED_APP_NAME 환경변수 제거**: 실제 프로젝트명을 $ACTUAL_PROJECT_NAME으로 직접 사용

#### 3. PROJECT_CREATION_GUIDE.md 워크플로우 단순화
- **복잡한 케이싱 가이드 제거**: PascalCase 강제, 검증 체크리스트 등 제거
- **단순한 워크플로우**: "먼저 프로젝트 생성 → AI에게 알림 → 자동 감지 후 개발" 방식
- **AI 협업 방법 간소화**: "프로젝트 생성 완료!" 한 마디면 충분하도록 수정
- **충돌 해결책 단순화**: AI_{projectName} 안전장치로 자동 해결

**예상 효과**:
- ✅ 인지 부하 감소: 복잡한 케이싱 규칙 이해 불필요
- ✅ 실수 방지: 사용자가 잘못할 수 있는 요소 원천 제거
- ✅ 직관적 워크플로우: "프로젝트 먼저 만들기" 자연스러운 순서
- ✅ 안전장치: AI_{projectName}으로 충돌 없이 안전 보장

---

## 📝 2024-10-26 10:30 - 파일명 케이싱 일치 시스템 개선 (중요 업데이트)

**변경 원인**: 사용자 요청 해결 - "Product Name: OnePageTodo로 하면 매번 너가 생성되는 파일이 onepagetodo라 제거하는 경우가 생기는데 이걸 해결해줄래?"

**수정된 파일들**:

#### 1. 템플릿 변수 규칙 표준화
- **templates/CLAUDE_template.md**: {{APP_NAME}} PascalCase 명시 추가
- **templates/CLAUDE_INTERACTIVE_template.md**: 동적 템플릿 생성 시 PascalCase 필수 규칙 추가
- **templates/Tasks_template.md**: 프로젝트 검증 단계에 PascalCase 정확 매칭 조건 추가

#### 2. FILE_MIGRATION_RULES.md 대소문자 불일치 해결 강화
- **케이싱 불일치 감지 로직**: 실제 프로젝트명과 템플릿 변수 자동 비교
- **스마트 매칭 시스템**: 케이스 인센시티브 폴더 찾기 함수 추가
- **자동 보정 스크립트**: 대소문자 불일치 시 실제 프로젝트명으로 경로 자동 수정

#### 3. 자동 검증 시스템 구축
- **CLAUDE_template.md 부트 프로토콜**: 6단계 자동 케이싱 검증 단계 추가
- **JSON Lines 로깅**: VERIFICATION 태스크로 검증 결과 구조화된 로그 출력
- **BLOCKER 규칙**: 심각한 케이싱 불일치 시 CASING_BLOCKER로 처리

**해결된 핵심 문제**:
1. **OnePageTodo vs onepagetodo 불일치**: 자동 감지 및 보정 시스템으로 완전 해결
2. **파일 이동 실패**: 실제 프로젝트명 기준 경로 설정으로 해결
3. **참조 오류**: CORRECTED_APP_NAME 환경변수로 일관된 참조 보장

---

## 🚨 Xcode 프로젝트 손상 문제 원인 분석 및 해결책

**발생한 에러**:
```
The project 'OnePageTodo' is damaged and cannot be opened.
Path: /Users/yeogangsu/Desktop/PRD/3_test/2/OnePageTodo/OnePageTodo.xcodeproj
Exception: -[XCBuildConfiguration _setTarget:]: unrecognized selector sent to instance
```

**핵심 문제점**:
1. **AI가 직접 프로젝트 파일을 생성하는 문제**: AI가 `project.pbxproj` 파일을 직접 텍스트로 생성하여 복잡한 바이너리/XML 하이브리드 구조 손상
2. **XCBuildConfiguration 객체 관계 손상**: UUID 참조 불일치, 객체 타입 매핑 오류
3. **템플릿의 가이드 방식 문제**: 복잡한 바이너리 파일 구조를 AI가 완벽히 재현하기 어려움

**해결책**:
- 사용자가 Xcode를 통해 직접 프로젝트를 생성하도록 가이드 변경
- AI는 코드 파일만 담당하고 프로젝트 파일 구조는 건드리지 않음
- 단계별 검증 시스템 추가로 프로젝트 유효성 확인

---

## 📅 2024-01-20 15:30 - 프로젝트 생성 로직 개편

**변경 원인**: 사용자 요청 - "처음 프로젝트 파일을 만드는 로직으로 변경"
**문제점**: 기존 방식은 사용자가 먼저 Xcode 프로젝트를 생성해야 했으나, 실패하거나 중간에 생성하는 경우 파일 이동이 복잡했음

**수정된 파일들**:

#### 1. `CLAUDE_template.md`
- **변경 내용**: CREATE PROJECT 단계를 3번째로 이동, 프로젝트 생성 우선 시도로 변경
- **세부 수정**:
  - 1단계: 프로젝트 생성 시도 (사용자 가이드)
  - 2단계: 실패 시 FILE_MIGRATION_RULES.md 참조하여 파일 이동
  - 3단계: 파일명 충돌 체크 및 해결
  - 4단계: 프로젝트 생성 완료 확인

#### 2. `FILE_MIGRATION_RULES.md` (신규 생성)
- **목적**: 프로젝트 생성이 중간/나중에 이루어질 때 파일 이동 규칙 정의
- **주요 내용**:
  - 자동 파일 매핑 규칙 (Domain, Presentation, Data 폴더별)
  - 충돌 해결 규칙 (기존 파일 보존 + AI 파일 적용)
  - 백업 생성 및 롤백 절차

**예상 효과**:
- ✅ 프로젝트 생성 실패 시에도 안전한 파일 이동 가능
- ✅ 사용자 친화적인 프로젝트 생성 프로세스
- ✅ 롤백 및 문제 해결 용이성 증대

---

## 📅 2024-01-20 16:45 - Core Data Entity 불일치 문제 해결

**변경 원인**: 사용자 오류 보고 - "Cannot find type 'TodoViewModel' / Cannot find 'Item' in scope"
**문제점**: 
1. Xcode 기본 생성 Entity(`Item`)와 AI 참조 Entity(`TodoEntity`) 불일치
2. 파일 이동 시 ViewModel import 누락
3. 중복 Persistence 파일로 인한 혼란

**수정된 파일들**:

#### 1. `CORE_DATA_ISSUES.md` (신규 생성)
- **목적**: Core Data 관련 문제들의 전문 해결 가이드
- **주요 내용**:
  - Entity 이름 불일치 문제 진단 및 해결
  - ViewModel Import 누락 문제 해결
  - Persistence 파일 중복 문제 해결
  - Core Data 검증 체크리스트

#### 2. `CLAUDE_template.md`
- **변경 내용**: CREATE PROJECT 단계에 Core Data 검증 과정 추가
- **세부 수정**:
  - 5단계 Core Data 검증 절차 추가
  - .xcdatamodeld 파일의 실제 Entity 이름 확인
  - Entity 참조 일관성 검사 필수화

**예상 효과**:
- ✅ Entity 이름 불일치로 인한 빌드 오류 방지
- ✅ 파일 이동 시 Core Data 관련 문제 사전 감지
- ✅ 체계적인 Core Data 문제 해결 프로세스 구축

---

## 📅 2024-10-25 14:30 - 인터랙티브 앱 발견 시스템 구축

**변경 원인**: 사용자 요청 - "어떤 앱을 만들고 싶은지에 대한 요구사항 및 어떻게 개발을 하고 싶은지에 대한 로직이 추가 되어야 할것 같아"
**문제점**: 기존 템플릿은 사용자가 구체적인 앱 종류를 알고 있다고 가정했으나, 실제로는 막연하게 "앱 개발해줘"라고 요청하는 경우가 많음

**수정된 파일들**:

#### 1. `APP_DISCOVERY.md` (신규 생성)
- **변경 내용**: 사용자 요구사항 발견을 위한 5단계 인터랙티브 시스템 구축
- **세부 수정**:
  - Step 1: 웰컴 & 앱 카테고리 선택 (8개 카테고리 제시)
  - Step 2: 세부 앱 타입 확정 (카테고리별 구체적 옵션)
  - Step 3: 주요 사용자 파악 (연령대, 라이프스타일, 기술 수준)
  - Step 4: 핵심 가치 및 기능 파악 (우선순위 기반 선택)
  - Step 5: 특별 요구사항 및 최종 확인

#### 2. `examples/fitness_app/` (신규 디렉토리 전체)
- **변경 내용**: 피트니스 앱 완성 예시 생성 (헬스장 운동 기록 앱)
- **세부 수정**:
  - CLAUDE.md: FitnessTracker 전용 개발 지침
  - USER_CONTEXT.md: 헬스장 이용자 페르소나 및 사용 환경 분석
  - BUSINESS_RULES.md: 운동 기록 관련 비즈니스 로직 정의
  - features/F01_WorkoutRecord.md: 핵심 운동 기록 기능 명세

#### 3. `examples/finance_app/` (신규 디렉토리 전체)
- **변경 내용**: 가계부 앱 완성 예시 생성 (개인 가계부 앱)
- **세부 수정**:
  - CLAUDE.md: MoneyManager 전용 개발 지침
  - USER_CONTEXT.md: 가계부 사용자 페르소나 및 사용 환경
  - BUSINESS_RULES.md: 금융 거래 관련 비즈니스 로직 (한국 특화)

**예상 효과**:
- ✅ 막연한 앱 개발 요청도 구체적 맞춤형 앱으로 변환 가능
- ✅ 사용자 요구사항 발견 과정의 체계화 및 자동화
- ✅ 완성된 예시 템플릿으로 개발 시작점 제공

---

## 📅 2024-10-25 17:45 - 인터랙티브 모드 일관성 개선

**변경 원인**: 사용자 피드백 - "왜 어떤 세션은 템플릿을 만들지, 맞춤형으로 만들지 고르게 하고 어떤 앱은 그냥 맘대로 개발을 진행하는거지?"
**문제점**: 기존 시스템이 요청 유형에 따라 다르게 동작하여 사용자 경험의 일관성 부족

**수정된 파일들**:

#### 1. `templates/CLAUDE_INTERACTIVE_template.md`
- **변경 내용**: 모든 앱 개발 요청에 대해 인터랙티브 모드 활성화
- **세부 수정**:
  - A) 막연한 요청 → 완전 APP_DISCOVERY 모드
  - B) 구체적 요청 → 요구사항 확인 + 템플릿 선택 모드
  - C) 예시 파일 직접 지정 → 확인 후 진행 모드

#### 2. `APP_DISCOVERY.md`
- **변경 내용**: 구체적 요청과 예시 지정 요청을 위한 새로운 프로세스 추가
- **세부 수정**:
  - Type B: 구체적 요청 처리 프로세스 (4단계)
  - Type C: 예시 지정 요청 처리 프로세스 (3단계)

**예상 효과**:
- ✅ 예측 가능한 개발 프로세스: 사용자가 어떤 방식으로 요청해도 일관된 경험
- ✅ 항상 요구사항 충분히 파악: 막연한 요청뿐만 아니라 구체적 요청도 추가 맥락 수집
- ✅ 템플릿 선택의 투명성: 기존 예시 활용 vs 새로 생성의 명확한 선택권 제공

---

## 📅 2024-10-26 15:30 - 번호 기반 폴더 우선순위 시스템 및 프리플라이트 검증 시스템 구축 (대규모 개편)

**변경 원인**: 사용자 요청 - "폴더의 이름순서 지정 + 앱 카테고리 선택 전에 앱이 명확하게 개발되는지 먼저 판단"
**문제점**: 
1. AI가 어떤 템플릿을 먼저 읽을지 불명확하여 임의로 파일 선택
2. 앱 개발 가능성을 사전 검증하지 않아 중간 포기 가능성 높음
3. 모든 사용자에게 동일한 완전 개발 프로세스만 제공

**수정된 파일들**:

#### 1. **폴더 구조 대폭 개편** (신규 생성)
- **변경 내용**: 번호 기반 우선순위 시스템으로 전면 재구성
- **세부 수정**:
  - `00_PREFLIGHT/` - 최우선 검증 시스템 폴더 생성
  - `01_MAIN_TEMPLATES/` - 메인 템플릿 폴더 생성 및 이동
  - `02_INTERACTIVE_DISCOVERY/` - 인터랙티브 시스템 폴더 생성 및 이동

#### 2. `00_PREFLIGHT/PREFLIGHT_CHECK.md` (신규 생성)
- **변경 내용**: 앱 개발 전 사전 검증 시스템 구축
- **세부 수정**:
  - A) 완전한 앱 개발 환경 - Xcode 설치, 2-3시간 투입, 실제 앱 완성 목표
  - B) 빠른 테스트/학습 환경 - 30분-1시간, 시스템 체험 목적
  - C) 개발 환경 없음 - 정보 확인 및 환경 설정 가이드 제공

#### 3. `01_MAIN_TEMPLATES/CLAUDE_template.md` (대폭 수정)
- **변경 내용**: 기존 인터랙티브 모드를 프리플라이트 검증 시스템으로 교체
- **세부 수정**:
  - 0단계: 모든 앱 개발 요청 시 `../00_PREFLIGHT/PREFLIGHT_CHECK.md` 우선 실행
  - 검증 통과 후 A/B/C 모드 분기 로직 추가

**예상 효과**:
- ✅ **AI 동작 예측 가능성**: 번호 순서로 명확한 파일 읽기 순서 보장
- ✅ **개발 성공률 향상**: 사전 검증으로 환경/의지/시간 확인 후 진행
- ✅ **맞춤형 사용자 경험**: 상황별 A/B/C 3가지 모드로 모든 사용자 만족

---

## 📅 2024-10-26 16:00 - QUICK_START_TODO.md 제거 및 시스템 완전 단순화

**변경 원인**: 사용자 요청 - "퀵 스타트md가 굳이 있을 필요가 있나? 그냥 프롬프트에서 다 시작하고 끝낼수 있는거 아니야?"
**문제점**: 
1. QUICK_START_TODO.md와 PROMPTS_GUIDE.md의 기능 중복으로 사용자 혼란 야기
2. 유지보수 부담 증가 (두 파일을 동시에 업데이트해야 함)
3. 새로운 프리플라이트 + 인터랙티브 시스템으로 완전 대체 가능

**수정된 파일들**:

#### 1. `QUICK_START_TODO.md` (완전 삭제)
- **변경 내용**: 파일 완전 제거
- **세부 수정**:
  - 153줄 분량의 투두리스트 전용 가이드 삭제
  - 중복된 프롬프트 예시 제거
  - 복잡한 단계별 설명 제거

#### 2. `PROMPTS_GUIDE.md` (단순화 및 중복 제거)
- **변경 내용**: QUICK_START_TODO.md 참조 모두 제거 및 메시지 단순화
- **세부 수정**:
  - 투두리스트 전용 링크 → "하나의 프롬프트로 모든 앱 개발" 메시지로 교체
  - 중복된 설명 제거 및 일관된 메시지로 통일

#### 3. `README.md` (대폭 단순화)
- **변경 내용**: 3가지 복잡한 시작 방법을 1가지 메인 프롬프트로 통합
- **세부 수정**:
  - Quick Start 섹션 완전 재작성
  - 🥇🥈🥉 3단계 → 🚀 1개 메인 프롬프트로 단순화
  - "ai_app_template을 기반으로 앱을 개발해줘!" 하나로 모든 상황 처리

**예상 효과**:
- ✅ **사용자 혼란 완전 제거**: 어떤 파일을 읽을지 고민할 필요 없음
- ✅ **인지 부하 대폭 감소**: 하나의 프롬프트만 기억하면 모든 앱 개발 가능
- ✅ **유지보수 부담 해소**: 단일 파일 체계로 업데이트 간소화
- ✅ **시스템 일관성 확보**: 모든 사용자가 동일한 프리플라이트 → 인터랙티브 경험

---

## 📋 변경 로그 규칙 (앞으로 사용할 양식)

### 📅 YYYY-MM-DD HH:MM - [변경 제목]
**변경 원인**: [사용자 요청/버그 수정/성능 개선/기능 추가 등]
**문제점**: [기존 방식의 문제점이나 개선이 필요한 이유]

**수정된 파일들**:
#### 1. `파일명.md`
- **변경 내용**: [구체적인 변경 사항]
- **세부 수정**: [상세한 수정 내용들]
- **영향 범위**: [이 변경이 미치는 영향]

**예상 효과**:
- ✅ [기대되는 긍정적 효과 1]
- ✅ [기대되는 긍정적 효과 2]

**다음 예정 작업**:
- [ ] [관련해서 추가로 수정이 필요한 작업들]

---

## 📅 2024-10-27 13:00 - 세션 3 빌드 오류 분석 및 해결방안 (시스템 안정성 개선)

**변경 원인**: 사용자 테스트 결과 - "3번의 경우는 이랬어 각각 오류 발생이 대화의 내용처럼 발견되었어 확인해줘 그리고 수정해야할 부분을 로그에 표기하고 작성하고 수정해줘"
**문제점**: 
1. 세션 1,2는 정상 동작했으나 세션 3에서 여러 Swift 컴파일 오류 발생
2. 생성된 앱이 기본 Xcode 템플릿과 동일하게 보이는 문제
3. 템플릿 시스템의 일관성 부족으로 빌드 실패 가능성

**발견된 세션 3 빌드 오류들**:

#### 1. **OnePageTodoApp.swift - lazy var 'self is immutable' 오류**
- **오류 내용**: `Cannot use mutating getter on immutable value: 'self' is immutable`
- **원인**: SwiftUI App struct에서 lazy var 사용 시 self 접근 불가
- **문제 코드**:
```swift
@main
struct OnePageTodoApp: App {
    let persistenceController = PersistenceController.shared
    lazy var todoViewModel: TodoViewModel = {
        // self 접근으로 인한 오류 발생
    }()
}
```
- **해결 방안**: lazy var를 static factory method로 변경
- **수정 코드**:
```swift
private static func createTodoViewModel(
    with persistenceController: PersistenceController
) -> TodoViewModel {
    let todoRepository: TodoRepository = 
        CoreDataTodoRepository(container: persistenceController.container)
    let todoService = TodoService(repository: todoRepository)
    return TodoViewModel(todoService: todoService)
}
```

#### 2. **TodoItem.swift - fatalError 안전성 문제**
- **오류 내용**: 입력 검증 실패 시 앱 강제 종료 (`fatalError` 사용)
- **원인**: 사용자 입력 오류를 런타임 크래시로 처리하는 비안전한 패턴
- **문제 코드**:
```swift
init(title: String) {
    guard !title.trimmingCharacters(in: .whitespacesAndNewlines).isEmpty else {
        fatalError("Title cannot be empty")
    }
    // ... 초기화 코드
}
```
- **해결 방안**: throws 패턴으로 변경하여 안전한 오류 처리
- **수정 코드**:
```swift
enum TodoItemError: Error {
    case emptyTitle
}

init(title: String) throws {
    let trimmedTitle = title.trimmingCharacters(in: .whitespacesAndNewlines)
    guard !trimmedTitle.isEmpty else {
        throw TodoItemError.emptyTitle
    }
    // ... 초기화 코드
}
```

#### 3. **중복 ContentView 파일 문제**
- **오류 내용**: Multiple ContentView.swift 파일로 인한 빌드 충돌
- **원인**: 기본 Xcode 생성 파일과 AI 생성 파일 간 이름 충돌
- **해결 방안**: 
  - 기존 ContentView.swift 파일 확인 후 통합 또는 이름 변경
  - 템플릿에서 파일 중복 검사 로직 강화

#### 4. **파일이 Xcode 프로젝트에 미포함 문제**
- **오류 내용**: 생성된 Swift 파일들이 Xcode 프로젝트에 추가되지 않아 기본 템플릿처럼 보임
- **원인**: AI가 파일 시스템에는 생성했으나 .xcodeproj에 파일 참조 추가 안됨
- **해결 방안**: 
  - 사용자에게 수동으로 Xcode에서 "Add Files to Project" 수행 안내
  - 파일 생성 후 Xcode 프로젝트 추가 단계 명시적 안내

**수정해야 할 템플릿 부분들**:

#### 1. `03_CLAUDE_TEMPLATE.md` 안정성 개선
- **추가 필요 항목**:
  - SwiftUI App struct에서 lazy var 사용 금지 규칙
  - fatalError 대신 throws 패턴 사용 규칙
  - 파일 중복 검사 및 해결 프로세스
  - Xcode 프로젝트 파일 추가 안내 강화

#### 2. 빌드 오류 방지 검증 체크리스트 생성
- **포함 내용**:
  - Swift 컴파일 오류 패턴 검사
  - Core Data Entity 이름 일관성 검사
  - 파일 중복 및 충돌 검사
  - Xcode 프로젝트 통합 검증

#### 3. 오류 처리 패턴 표준화
- **규칙 정의**:
  - 사용자 입력 검증: throws 패턴 사용
  - 시스템 오류: assertionFailure 또는 precondition 사용
  - 개발자 오류: fatalError는 정말 회복 불가능한 경우만

**예상 효과**:
- ✅ **빌드 성공률 향상**: 주요 Swift 컴파일 오류 패턴 사전 방지
- ✅ **일관된 오류 처리**: throws 패턴으로 안전한 오류 처리 보장
- ✅ **사용자 경험 개선**: 앱 크래시 없는 안정적 동작
- ✅ **템플릿 신뢰성 증대**: 세션별 일관된 빌드 가능한 앱 생성

**다음 예정 작업**:
- [x] 세션 3 오류 분석 완료
- [ ] OnePageTodoApp.swift lazy var 오류 수정
- [ ] TodoItem.swift throws 패턴 적용
- [ ] 03_CLAUDE_TEMPLATE.md 안정성 규칙 추가
- [ ] 빌드 오류 방지 체크리스트 작성
- [ ] 수정된 템플릿으로 테스트 수행

---

> **관리 규칙**: 모든 템플릿 수정사항은 이 파일에 기록하며, 변경 이유와 영향 범위를 명시한다.